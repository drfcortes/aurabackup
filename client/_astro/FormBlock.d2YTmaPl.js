import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{V as g}from"./index.ziJcsk7A.js";import{r as i}from"./index.RH_Wq4ov.js";function S(){const r=new Date().getFullYear(),n=Math.floor(Math.random()*1e6).toString().padStart(6,"0");return`AURA-${r}-${n}`}function A(){return new Date().toISOString()}async function C(a){const n=new TextEncoder().encode(JSON.stringify(a)),o=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(o)).map(l=>l.toString(16).padStart(2,"0")).join("")}async function I(a){const r=await fetch("https://qyx30mhh90.execute-api.us-east-2.amazonaws.com/v1/storeAuraBlock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){const o=await r.text();throw console.error("🛑 Registry error:",o),new Error("Error uploading block: "+o)}return await r.json()}const _="0.1",b=[{name:"GPT-4o",provider:"OpenAI"},{name:"GPT-4 Turbo",provider:"OpenAI"},{name:"Gemini 1.5",provider:"Google"},{name:"Claude 3",provider:"Anthropic"},{name:"LLaMA 3",provider:"Meta"},{name:"Mistral 7B",provider:"Mistral AI"},{name:"Command R+",provider:"Cohere"},{name:"DeepSeek-VL",provider:"DeepSeek AI"},{name:"DeepSeek Coder",provider:"DeepSeek AI"},{name:"Suno",provider:"Suno AI"},{name:"Udio",provider:"Udio"},{name:"Runway Gen-2",provider:"Runway"},{name:"Pika",provider:"Pika Labs"},{name:"Sora",provider:"OpenAI"},{name:"Dream Machine",provider:"Luma AI"},{name:"Stable Diffusion XL",provider:"Stability AI"},{name:"Midjourney v6",provider:"Midjourney"},{name:"DALL·E 3",provider:"OpenAI"},{name:"Imagen 2",provider:"Google DeepMind"},{name:"Other",provider:""}];async function D(a){a.language=navigator.language||null,a.browser_info=navigator.userAgent||null;try{const r=await fetch("https://ipapi.co/json/");if(r.ok){const n=await r.json();a.country=n.country_code||null}}catch{console.warn("Could not fetch country")}return a.content_type="text",a.generation_context="general",a.image_url=null,a}function R(){const[a,r]=i.useState({model:"",provider:"",prompt:"",output_text:"",user_edit:!1,notes:"",license:"CC-BY-4.0",email:""}),[n,o]=i.useState(!1),[c]=i.useState(S()),[m]=i.useState(A()),[l,v]=i.useState(null),[f,j]=i.useState(""),[h,x]=i.useState(""),y=t=>{const s=t.target.value,u=b.find(p=>p.name===s);r({...a,model:s,provider:u?.provider||""}),x("")},d=t=>{const{name:s,value:u,type:p,checked:k}=t.target;r({...a,[s]:p==="checkbox"?k:u})},w=async()=>{let t={aura_version:_,model:a.model==="Other"?h:a.model,provider:a.provider,prompt:a.prompt,output_text:a.output_text||null,timestamp:m,user_edit:a.user_edit,notes:a.notes,license:a.license,email:a.email,uid:c};t=await D(t);const s=await C(t);t.content_hash=s,v(t),j(s),window.dispatchEvent(new CustomEvent("auraBlockGenerated",{detail:t}))},N=async()=>{if(!l){alert("⚠️ Please generate the block first.");return}o(!0);try{const t=await I(l);g.success("✅ Successfully submitted to the AURA Archive"),localStorage.setItem("lastGeneratedBlock",JSON.stringify(l)),setTimeout(()=>{window.location.href=`/block/${t.uid}`},1500)}catch(t){console.error(t),g.error("❌ Submission failed. Please try again."),o(!1)}};return e.jsxs("div",{className:"p-8 bg-aura-soft dark:bg-aura-deep shadow-md rounded-2xl max-w-3xl mx-auto space-y-6 text-aura-deep dark:text-aura-cream",children:[e.jsx("h1",{className:"text-3xl font-bold text-aura-green dark:text-aura-yellow",children:"Generate AURA Block"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-1",children:["AI Model Used ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("p",{className:"text-sm mb-2",children:"Select the AI model you used to generate this content."}),e.jsxs("select",{className:"w-full border rounded-lg p-2 bg-white dark:bg-aura-deep",value:a.model,onChange:y,children:[e.jsx("option",{value:"",children:"Select a model"}),b.map((t,s)=>e.jsx("option",{value:t.name,children:t.name},s))]}),a.model==="Other"&&e.jsx("input",{type:"text",placeholder:"Custom model name",className:"w-full border rounded-lg p-2 mt-2",value:h,onChange:t=>x(t.target.value)})]}),a.provider&&e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Provider"}),e.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-100 dark:bg-aura-gray",value:a.provider,disabled:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-1",children:["Prompt ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("p",{className:"text-sm mb-2",children:"Write the exact prompt used to generate the output."}),e.jsx("textarea",{className:"w-full border rounded-lg p-2",name:"prompt",value:a.prompt,onChange:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Output Text"}),e.jsx("p",{className:"text-sm mb-2",children:"Describe or paste the generated output from the AI model."}),e.jsx("textarea",{className:"w-full border rounded-lg p-2",name:"output_text",value:a.output_text,onChange:d})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"user_edit",checked:a.user_edit,onChange:d}),e.jsx("label",{children:"This content was manually edited after generation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Notes (optional)"}),e.jsx("p",{className:"text-sm mb-2",children:"Any additional observations or context."}),e.jsx("textarea",{className:"w-full border rounded-lg p-2",name:"notes",value:a.notes,onChange:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Email (optional)"}),e.jsx("p",{className:"text-sm mb-2 text-aura-gray",children:"Recommended if you want to track all your generated blocks in the future."}),e.jsx("input",{className:"w-full border rounded-lg p-2",type:"email",name:"email",value:a.email,onChange:d})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"UID"}),e.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-100",disabled:!0,value:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Timestamp"}),e.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-100",disabled:!0,value:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"License"}),e.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-100",disabled:!0,value:a.license})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Content Hash"}),e.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-100",disabled:!0,value:f})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{onClick:w,className:"bg-aura-leather hover:bg-aura-green text-white px-6 py-2 rounded-full shadow",children:"🔄 Generate Block"}),e.jsx("button",{onClick:N,disabled:n,className:`bg-aura-green hover:bg-aura-deep text-white px-6 py-2 rounded-full shadow ${n?"opacity-50":""}`,children:"🚀 Submit to AURA Registry"})]}),l&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Preview"}),e.jsx("pre",{className:"bg-aura-beige dark:bg-aura-gray text-sm p-4 rounded-xl max-h-96 overflow-auto",children:JSON.stringify(l,null,2)})]})]})}export{R as default};
