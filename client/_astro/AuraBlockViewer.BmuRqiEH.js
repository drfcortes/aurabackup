import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.DtoOFyvK.js";function N({uidFromPage:s}){const[c,x]=o.useState(s||""),[a,n]=o.useState(null),[h,b]=o.useState(!1),[m,p]=o.useState(""),[u,i]=o.useState(""),g=async t=>{if(t.trim()){b(!0),p("");try{const r=await fetch(`https://qyx30mhh90.execute-api.us-east-2.amazonaws.com/v1/getAuraBlockByUID/${t}`);if(!r.ok)throw new Error("Block not found or server error");const d=await r.json(),l=d.Item||d;n(l);const f=l.timestamp?new Date(l.timestamp).getFullYear():"n.d.",w=`${l.model||"Unknown Model"} (${f}). ${l.uid||"undefined"}. Retrieved from https://aurablock.org/block/${l.uid||""}`;i(w)}catch(r){console.error("Error fetching block:",r),p("⚠️ No AURA block found with that UID."),n(null),i("")}b(!1)}};o.useEffect(()=>{if(s){const t=localStorage.getItem("lastGeneratedBlock");if(t){const r=JSON.parse(t);if(r.uid===s){n(r);const d=r.timestamp?new Date(r.timestamp).getFullYear():"n.d.",l=`${r.model||"Unknown Model"} (${d}). ${r.uid||"undefined"}. Retrieved from https://aurablock.org/block/${r.uid||""}`;i(l),localStorage.removeItem("lastGeneratedBlock");return}}g(s)}},[s]);const k=()=>{u&&navigator.clipboard.writeText(u).then(()=>{alert("AURA Reference copied to clipboard!")})},v=()=>{a&&navigator.clipboard.writeText(JSON.stringify(a,null,2)).then(()=>{alert("AURA Raw+ copied to clipboard!")})};return e.jsxs("div",{className:"space-y-6 p-6 bg-aura-soft dark:bg-aura-deep rounded-xl shadow-lg border border-aura-beige dark:border-aura-gray",children:[e.jsx("h2",{className:"text-2xl font-bold text-aura-green dark:text-aura-yellow",children:"AURA Block Viewer"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"text",value:c,onChange:t=>x(t.target.value),placeholder:"Enter AURA Block UID",className:"flex-1 px-4 py-2 border border-aura-olive dark:border-aura-gray rounded-md bg-white dark:bg-aura-deep text-aura-deep dark:text-aura-cream"}),e.jsx("button",{onClick:()=>g(c),className:"px-6 py-2 bg-aura-green dark:bg-aura-leather text-white rounded-md hover:bg-aura-deep dark:hover:bg-aura-yellow transition",children:"Search"})]}),h&&e.jsx("p",{className:"italic",children:"Loading..."}),m&&e.jsx("p",{className:"text-red-600 dark:text-red-400 font-medium",children:m}),a&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[[{label:"UID",value:a.uid},{label:"Model",value:a.model},{label:"Provider",value:a.provider},{label:"Timestamp",value:a.timestamp},{label:"License",value:a.license},{label:"Email",value:a.email},{label:"Language",value:a.language},{label:"Country",value:a.country},{label:"Browser Info",value:a.browser_info},{label:"Content Type",value:a.content_type},{label:"Generation Context",value:a.generation_context},{label:"Notes",value:a.notes},{label:"Content Hash",value:a.content_hash}].map((t,r)=>t.value&&e.jsxs("div",{className:"p-4 bg-aura-beige dark:bg-aura-olive rounded-lg border border-aura-olive dark:border-aura-gray",children:[e.jsx("h4",{className:"font-semibold text-aura-green dark:text-aura-yellow",children:t.label}),e.jsx("p",{className:"text-sm break-words",children:t.value})]},r)),a.prompt&&e.jsxs("div",{className:"col-span-full p-4 bg-aura-beige dark:bg-aura-olive rounded-lg border border-aura-olive dark:border-aura-gray",children:[e.jsx("h4",{className:"font-semibold text-aura-green dark:text-aura-yellow",children:"Prompt"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:a.prompt})]}),a.output_text&&e.jsx("div",{className:"col-span-full p-4 bg-aura-beige dark:bg-aura-olive rounded-lg border border-aura-olive dark:border-aura-gray",children:e.jsxs("details",{children:[e.jsx("summary",{className:"cursor-pointer font-semibold text-aura-green dark:text-aura-yellow",children:"Show Output"}),e.jsx("p",{className:"mt-2 text-sm whitespace-pre-wrap",children:a.output_text})]})}),a.image_url&&e.jsx("div",{className:"col-span-full",children:e.jsx("img",{src:a.image_url,alt:"AURA content",className:"rounded max-w-full"})}),e.jsxs("div",{className:"col-span-full p-4 bg-aura-beige dark:bg-aura-olive rounded-lg border border-aura-olive dark:border-aura-gray",children:[e.jsx("h4",{className:"text-lg font-semibold text-aura-green dark:text-aura-yellow mb-2",children:"📄 AURA Reference"}),e.jsx("pre",{className:"bg-white dark:bg-aura-deep text-sm p-3 rounded-md overflow-x-auto border border-aura-olive dark:border-aura-gray",children:u}),e.jsx("button",{onClick:k,className:"mt-3 bg-aura-green dark:bg-aura-leather text-white px-4 py-2 rounded hover:bg-aura-deep dark:hover:bg-aura-yellow transition",children:"📋 Copy AURA Reference"})]}),e.jsx("div",{className:"col-span-full p-4 bg-aura-beige dark:bg-aura-olive rounded-lg border border-aura-olive dark:border-aura-gray",children:e.jsxs("details",{children:[e.jsx("summary",{className:"cursor-pointer font-semibold text-aura-green dark:text-aura-yellow",children:"Show AURA Raw+"}),e.jsx("pre",{className:"mt-2 bg-white dark:bg-aura-deep text-sm p-3 rounded-md max-h-[400px] overflow-auto border border-aura-olive dark:border-aura-gray",children:JSON.stringify(a,null,2)}),e.jsx("button",{onClick:v,className:"mt-3 bg-aura-green dark:bg-aura-leather text-white px-4 py-2 rounded hover:bg-aura-deep dark:hover:bg-aura-yellow transition",children:"📋 Copy AURA Raw+"})]})})]})]})}export{N as default};
