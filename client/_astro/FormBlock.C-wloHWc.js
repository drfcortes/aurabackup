import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{V as b}from"./index.ziJcsk7A.js";import{r as l}from"./index.RH_Wq4ov.js";function S(){const r=new Date().getFullYear(),s=Math.floor(Math.random()*1e6).toString().padStart(6,"0");return`AURA-${r}-${s}`}function A(){return new Date().toISOString()}async function C(a){const s=new TextEncoder().encode(JSON.stringify(a)),n=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}async function I(a){const r=await fetch("https://qyx30mhh90.execute-api.us-east-2.amazonaws.com/v1/storeAuraBlock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){const n=await r.text();throw console.error("🛑 Registry error:",n),new Error("Error uploading block: "+n)}return await r.json()}const D="0.1",v=[{name:"GPT-4o",provider:"OpenAI"},{name:"GPT-4 Turbo",provider:"OpenAI"},{name:"Gemini 1.5",provider:"Google"},{name:"Claude 3",provider:"Anthropic"},{name:"LLaMA 3",provider:"Meta"},{name:"Mistral 7B",provider:"Mistral AI"},{name:"Command R+",provider:"Cohere"},{name:"DeepSeek-VL",provider:"DeepSeek AI"},{name:"DeepSeek Coder",provider:"DeepSeek AI"},{name:"Suno",provider:"Suno AI"},{name:"Udio",provider:"Udio"},{name:"Runway Gen-2",provider:"Runway"},{name:"Pika",provider:"Pika Labs"},{name:"Sora",provider:"OpenAI"},{name:"Dream Machine",provider:"Luma AI"},{name:"Stable Diffusion XL",provider:"Stability AI"},{name:"Midjourney v6",provider:"Midjourney"},{name:"DALL·E 3",provider:"OpenAI"},{name:"Imagen 2",provider:"Google DeepMind"},{name:"Other",provider:""}];function R(){const[a,r]=l.useState({model:"",provider:"",prompt:"",user_edit:!1,notes:"",license:"CC-BY-4.0",email:""}),[s,n]=l.useState(!1),[c]=l.useState(S()),[m]=l.useState(A()),[i,f]=l.useState(null),[g,j]=l.useState(""),[h,x]=l.useState(""),w=t=>{const o=t.target.value,u=v.find(p=>p.name===o);r({...a,model:o,provider:u?.provider||""}),x("")},d=t=>{const{name:o,value:u,type:p,checked:k}=t.target;r({...a,[o]:p==="checkbox"?k:u})},y=async()=>{const t={aura_version:D,model:a.model==="Other"?h:a.model,provider:a.provider,prompt:a.prompt,timestamp:m,user_edit:a.user_edit,notes:a.notes,license:a.license,email:a.email,uid:c},o=await C(t);t.content_hash=o,f(t),j(o),window.dispatchEvent(new CustomEvent("auraBlockGenerated",{detail:t}))},N=async()=>{if(!i){alert("⚠️ Please generate the block first.");return}n(!0);try{const t=await I(i);b.success("✅ Successfully submitted to the AURA Archive"),setTimeout(()=>{window.location.href=`/block/${t.uid}`},1500)}catch(t){console.error(t),b.error("❌ Submission failed. Please try again."),n(!1)}};return e.jsxs("div",{className:"p-8 bg-white shadow-md rounded-2xl max-w-3xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-auraWine",children:"Generate AURA Block"}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"AI Model Used"}),e.jsxs("select",{className:"w-full border p-2 rounded-md",value:a.model,onChange:w,children:[e.jsx("option",{value:"",children:"Select a model"}),v.map((t,o)=>e.jsx("option",{value:t.name,children:t.name},o))]}),a.model==="Other"&&e.jsx("input",{type:"text",placeholder:"Custom model name",className:"w-full border p-2 mt-2 rounded-md",value:h,onChange:t=>x(t.target.value)})]}),a.provider&&e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Provider"}),e.jsx("input",{className:"w-full border p-2 rounded-md bg-gray-100",value:a.provider,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Prompt"}),e.jsx("textarea",{className:"w-full border p-2 rounded-md",name:"prompt",value:a.prompt,onChange:d,placeholder:"Describe your prompt..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"user_edit",checked:a.user_edit,onChange:d}),e.jsx("label",{children:"This content was manually edited"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Notes (optional)"}),e.jsx("textarea",{className:"w-full border p-2 rounded-md",name:"notes",value:a.notes,onChange:d,placeholder:"Any observations about the output"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Email (optional)"}),e.jsx("input",{className:"w-full border p-2 rounded-md",type:"email",name:"email",value:a.email,onChange:d,placeholder:"email@example.com"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Used to send UID confirmation (optional)."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"UID"}),e.jsx("input",{className:"w-full border p-2 rounded-md bg-gray-100",disabled:!0,value:c}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Unique identifier for this AURA block."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Timestamp"}),e.jsx("input",{className:"w-full border p-2 rounded-md bg-gray-100",disabled:!0,value:m}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Time of creation (auto-generated)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"License"}),e.jsx("input",{className:"w-full border p-2 rounded-md",name:"license",value:a.license,onChange:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Content Hash"}),e.jsx("input",{className:"w-full border p-2 rounded-md bg-gray-100",disabled:!0,value:g})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between pt-4",children:[e.jsx("button",{onClick:y,className:"bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-2 rounded-full shadow",children:"🔄 Generate Block"}),e.jsx("button",{onClick:N,disabled:s,className:`flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2 rounded-full shadow transition-all ${s?"opacity-50 cursor-not-allowed":""}`,children:s?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Uploading to Registry..."]}):e.jsx(e.Fragment,{children:"🚀 Submit to AURA Registry"})})]}),i&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-aura-deep mb-2",children:"Preview"}),e.jsx("pre",{className:"bg-gray-100 text-sm p-4 rounded-xl max-h-96 overflow-auto",children:JSON.stringify(i,null,2)})]})]})}export{R as default};
