import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.DtoOFyvK.js";function A({uidFromPage:d}){const[u,g]=s.useState(d||""),[r,n]=s.useState(null),[h,p]=s.useState(!1),[m,b]=s.useState(""),[i,c]=s.useState(""),x=async t=>{if(t.trim()){p(!0),b("");try{const a=await fetch(`https://qyx30mhh90.execute-api.us-east-2.amazonaws.com/v1/getAuraBlockByUID/${t}`);if(!a.ok)throw new Error("Block not found or server error");const l=await a.json(),o=l.Item||l;n(o);const w=o.timestamp?new Date(o.timestamp).getFullYear():"n.d.",v=`${o.model||"Unknown Model"} (${w}). ${o.uid||"undefined"}. Retrieved from https://aurablock.org/block/${o.uid||""}`;c(v)}catch(a){console.error("Error fetching block:",a),b("⚠️ No AURA block found with that UID."),n(null),c("")}p(!1)}};s.useEffect(()=>{if(d){const t=localStorage.getItem("lastGeneratedBlock");if(t){const a=JSON.parse(t);if(a.uid===d){n(a);const l=a.timestamp?new Date(a.timestamp).getFullYear():"n.d.",o=`${a.model||"Unknown Model"} (${l}). ${a.uid||"undefined"}. Retrieved from https://aurablock.org/block/${a.uid||""}`;c(o),localStorage.removeItem("lastGeneratedBlock");return}}x(d)}},[d]);const k=()=>{i&&navigator.clipboard.writeText(i).then(()=>{alert("AURA Reference copied to clipboard!")})},y=()=>{r?.output_text&&navigator.clipboard.writeText(r.output_text).then(()=>{alert("Output copied to clipboard!")})},f=()=>{r&&navigator.clipboard.writeText(JSON.stringify(r,null,2)).then(()=>{alert("AURA Raw+ copied to clipboard!")})};return e.jsxs("div",{className:"space-y-6 p-6 bg-aura-soft dark:bg-aura-deep rounded-xl shadow-lg border border-aura-beige dark:border-aura-gray",children:[e.jsx("h2",{className:"text-2xl font-bold text-aura-green dark:text-aura-yellow",children:"AURA Block Viewer"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"text",value:u,onChange:t=>g(t.target.value),placeholder:"Enter AURA Block UID",className:"flex-1 px-4 py-2 border border-aura-olive dark:border-aura-gray rounded-md bg-white dark:bg-aura-deep text-aura-deep dark:text-aura-cream"}),e.jsx("button",{onClick:()=>x(u),className:"px-6 py-2 bg-aura-green dark:bg-aura-leather text-white rounded-md hover:bg-aura-deep dark:hover:bg-aura-yellow transition",children:"Search"})]}),h&&e.jsx("p",{className:"italic",children:"Loading..."}),m&&e.jsx("p",{className:"text-red-600 dark:text-red-400 font-medium",children:m}),r&&e.jsxs(e.Fragment,{children:[e.jsx("table",{className:"min-w-full border border-aura-olive dark:border-aura-gray rounded-lg overflow-hidden",children:e.jsx("tbody",{children:Object.entries({UID:r.uid,Model:r.model,Provider:r.provider,Prompt:r.prompt,"Output Text":r.output_text?"(Click to expand below)":null,Timestamp:r.timestamp,License:r.license,Email:r.email,Notes:r.notes,"Content Hash":r.content_hash,Language:r.language,Country:r.country,"Browser Info":r.browser_info,"Content Type":r.content_type,"Generation Context":r.generation_context}).map(([t,a],l)=>a&&e.jsxs("tr",{className:"border-t border-aura-olive dark:border-aura-gray",children:[e.jsx("td",{className:"px-4 py-2 font-semibold bg-aura-beige dark:bg-aura-olive w-1/3",children:t}),e.jsx("td",{className:"px-4 py-2",children:a})]},l))})}),r.output_text&&e.jsxs("details",{className:"mt-3 rounded-lg border border-aura-olive dark:border-aura-gray",children:[e.jsx("summary",{className:"cursor-pointer text-aura-green dark:text-aura-yellow px-4 py-2",children:"Show Output"}),e.jsxs("div",{className:"bg-aura-beige dark:bg-aura-gray p-4 rounded-b-lg",children:[e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:r.output_text}),e.jsx("button",{onClick:y,className:"mt-3 bg-aura-green dark:bg-aura-leather text-white px-4 py-2 rounded hover:bg-aura-deep dark:hover:bg-aura-yellow transition",children:"📋 Copy Output"})]})]}),r.image_url&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:r.image_url,alt:"AURA content",className:"rounded max-w-full"})}),e.jsxs("div",{className:"mt-6 p-4 bg-aura-beige dark:bg-aura-olive rounded-lg border border-aura-olive dark:border-aura-gray",children:[e.jsx("h4",{className:"text-lg font-semibold text-aura-green dark:text-aura-yellow mb-2",children:"📄 AURA Reference"}),e.jsx("p",{className:"text-sm mb-3",children:"This is the recommended way to cite this AURA block in your documents."}),e.jsx("pre",{className:"bg-white dark:bg-aura-deep text-sm p-3 rounded-md overflow-x-auto border border-aura-olive dark:border-aura-gray",children:i}),e.jsx("button",{onClick:k,className:"mt-3 bg-aura-green dark:bg-aura-leather text-white px-4 py-2 rounded hover:bg-aura-deep dark:hover:bg-aura-yellow transition",children:"📋 Copy AURA Reference"})]}),e.jsxs("details",{className:"mt-6 rounded-lg border border-aura-olive dark:border-aura-gray",children:[e.jsx("summary",{className:"cursor-pointer text-aura-green dark:text-aura-yellow px-4 py-2",children:"Show AURA Raw+"}),e.jsxs("div",{className:"bg-white dark:bg-aura-deep p-4 rounded-b-lg border-t border-aura-olive dark:border-aura-gray",children:[e.jsx("pre",{className:"text-sm text-aura-black dark:text-aura-cream max-h-[400px] overflow-auto",children:JSON.stringify(r,null,2)}),e.jsx("button",{onClick:f,className:"mt-3 bg-aura-green dark:bg-aura-leather text-white px-4 py-2 rounded hover:bg-aura-deep dark:hover:bg-aura-yellow transition",children:"📋 Copy AURA Raw+"})]})]})]})]})}export{A as default};
